# 🔄 대화형 워크플로우 가이드

**Automation Master**의 가장 강력한 기능인 **대화형 워크플로우**를 사용하면, 각 단계마다 정보를 입력하고 → Claude Code 프롬프트를 받고 → 결과를 확인하고 → 승인하는 전체 프로세스를 체계적으로 관리할 수 있습니다.

## 🎯 워크플로우 개요

```
단계 시작
   ↓
정보 입력 (대화형 질문)
   ↓
프롬프트 자동 생성 (MCP 활용 포함)
   ↓
Claude Code에 프롬프트 실행
   ↓
결과 확인: "작업 완료했나요?"
   ↓
만족도 확인: "결과가 만족스러운가요?"
   ├─ Yes → 다음 단계로 진행
   └─ No → 수정/보완 → 다시 확인
```

## 🚀 시작하기

### 기본 사용법

```bash
npm run workflow
```

이 명령어 하나로 전체 워크플로우가 시작됩니다!

### 특정 단계부터 시작

```bash
npm run workflow -- --step 3
```

## 📋 워크플로우 상세 흐름

### 1단계: 프로젝트 초기화/로드

워크플로우를 시작하면 먼저 프로젝트를 확인합니다:

```
🚀 Automation Master - 대화형 워크플로우

? 기존 프로젝트 "my-project"를 계속하시겠습니까? (Y/n)
```

- **Yes**: 기존 프로젝트 계속 진행
- **No**: 새 프로젝트 생성

### 2단계: 단계별 정보 입력

각 단계마다 필요한 정보를 대화형으로 수집합니다:

#### 단계 1: 아이디어 발굴
```
💡 이 단계에 필요한 정보를 입력해주세요.

? 해결하려는 문제가 무엇인가요?
→ 팀 협업 시 작업 관리가 복잡함

? 타겟 사용자는 누구인가요?
→ 스타트업 개발팀

? 경쟁 제품/서비스가 있다면 입력하세요:
→ Jira, Trello, Linear

? 추가로 고려할 사항이 있다면 입력하세요 (선택):
→ 간단하고 직관적인 UI 필요
```

#### 단계 2: PDR 작성
```
? 핵심 기능 3가지를 입력하세요 (쉼표로 구분):
→ 작업 관리, 칸반 보드, 팀 협업

? 기술 스택을 선택하세요:
  ❯ React + Supabase
    Next.js + Supabase
    Vue + Supabase
    Custom
```

#### 단계 3: 시스템 기획
```
? 필요한 데이터 테이블을 입력하세요 (쉼표로 구분):
→ users, projects, tasks, comments

? 주요 API 엔드포인트를 입력하세요:
→ /api/tasks, /api/projects, /api/auth
```

#### 단계 4: 디자인 시스템
```
? 참고할 디자인 사이트 URL을 입력하세요:
→ linear.app, notion.so

? 디자인 스타일을 선택하세요:
  ❯ Modern
    Minimalist
    Professional
    Creative
```

#### 단계 5: 개발 환경 설정
```
? TypeScript를 사용하시겠습니까? (Y/n)
→ Yes

? 프레임워크를 선택하세요:
  ❯ Next.js 14
    React + Vite
    Vue 3
```

### 3단계: 프롬프트 자동 생성

입력한 정보를 바탕으로 실행 가능한 Claude Code 프롬프트가 생성됩니다:

```
⏳ 프롬프트 생성 중...
✔ 프롬프트 생성 완료!

╔════════════════════════════════════════════════╗
║  📋 Claude Code 실행 프롬프트
║
║  아래 프롬프트를 Claude Code에 붙여넣어 실행하세요:
╚════════════════════════════════════════════════╝

────────────────────────────────────────────────────
# 단계 1: 아이디어 발굴 및 정의

## 프로젝트 정보
- 프로젝트명: my-project
- 해결하려는 문제: 팀 협업 시 작업 관리가 복잡함
- 타겟 사용자: 스타트업 개발팀
- 경쟁사: Jira, Trello, Linear

## MCP 활용 작업

### 1. Task Master로 프로젝트 등록

```
@task-master를 사용해서 새 프로젝트를 시작하고 싶어.

프로젝트명: my-project
목표: 팀 협업 작업 관리 툴 개발
타겟: 스타트업 개발팀

경쟁사 분석이 필요해:
- Jira
- Trello
- Linear
```

### 2. 경쟁사 분석

```
@web-search를 사용해서 다음 제품들의 특징을 조사해줘:
...
```
────────────────────────────────────────────────────

? 프롬프트를 파일로 저장하시겠습니까? (Y/n)
```

프롬프트는 `claudedocs/prompt-step-1.md`에 자동 저장됩니다.

### 4단계: Claude Code 실행 대기

```
⏸️  Claude Code에서 작업을 완료한 후 계속하세요.

? Claude Code 작업이 완료되었습니까? (y/N)
```

이 시점에서:
1. 생성된 프롬프트를 복사
2. Claude Code에 붙여넣기
3. Claude Code가 작업 완료
4. 터미널로 돌아와서 **Yes** 선택

### 5단계: 결과 확인 및 승인

#### 만족한 경우

```
? 작업 결과가 만족스럽습니까? (Y/n)
→ Yes

✅ 단계 1 완료!

? 다음 단계 2로 진행하시겠습니까? (Y/n)
→ Yes
```

자동으로 다음 단계로 진행됩니다!

#### 불만족한 경우

```
? 작업 결과가 만족스럽습니까? (y/N)
→ No

🔄 결과를 수정하거나 보완하세요.

? 어떤 부분을 수정/보완하고 싶으신가요?
→ 경쟁사 분석에서 가격 정보가 빠져있음

? 다음 단계:
  ❯ 수정/보완 후 다시 확인
    이 단계 건너뛰고 다음으로
    이전 단계로 돌아가기
```

**수정/보완 후 다시 확인**을 선택하면:
- 프롬프트가 다시 표시됩니다
- Claude Code에서 수정 작업을 진행합니다
- 다시 확인 프로세스로 돌아갑니다

### 6단계: 피드백 저장

모든 피드백은 자동으로 저장되어 프로젝트 히스토리에 기록됩니다:

```json
{
  "steps": {
    "1": {
      "feedback": [
        {
          "timestamp": "2025-01-15T10:30:00Z",
          "content": "경쟁사 분석에서 가격 정보가 빠져있음"
        }
      ]
    }
  }
}
```

## 🎛️ 워크플로우 제어

### 작업 중단 및 재개

언제든지 워크플로우를 중단할 수 있습니다:

```
? Claude Code 작업이 완료되었습니까? (y/N)
→ No

? 어떻게 하시겠습니까?
  ❯ 나중에 계속하기 (종료)
    프롬프트 다시 보기
    이전 단계로 돌아가기
```

**나중에 계속하기**를 선택하면:
```
👋 워크플로우를 종료합니다.
현재 진행: 단계 3/10
```

다음에 다시 시작하면 중단된 지점부터 계속됩니다!

### 이전 단계로 돌아가기

```
? 다음 단계:
    수정/보완 후 다시 확인
    이 단계 건너뛰고 다음으로
  ❯ 이전 단계로 돌아가기
```

이전 단계의 작업을 다시 검토하거나 수정할 수 있습니다.

## 📊 진행 상태 추적

워크플로우는 모든 진행 상태를 자동으로 추적합니다:

```javascript
{
  "projectName": "my-project",
  "currentStep": 3,
  "startedAt": "2025-01-15T09:00:00Z",
  "steps": {
    "1": {
      "status": "completed",
      "completedAt": "2025-01-15T10:00:00Z",
      "checklist": [true, true, true, true],
      "feedback": [...]
    },
    "2": {
      "status": "completed",
      "completedAt": "2025-01-15T11:30:00Z",
      "checklist": [true, true, true, true, true]
    },
    "3": {
      "status": "in_progress",
      "startedAt": "2025-01-15T12:00:00Z",
      "checklist": [true, false, false, false, false, false]
    }
  }
}
```

## 🎯 사용 시나리오

### 시나리오 1: 처음부터 끝까지

```bash
# 1. 워크플로우 시작
npm run workflow

# 2. 프로젝트 생성
→ 프로젝트명 입력: my-awesome-app

# 3. 단계 1 실행
→ 정보 입력 (문제, 타겟 사용자 등)
→ 프롬프트 생성 및 저장
→ Claude Code 실행
→ 결과 확인: 만족
→ 다음 단계로

# 4-10. 나머지 단계 반복
→ 각 단계마다 동일한 프로세스

# 11. 완료!
🎉 축하합니다! 모든 단계를 완료했습니다!
```

### 시나리오 2: 중간에 중단하고 재개

**첫째 날:**
```bash
npm run workflow

# 단계 1-3 완료
# 단계 4 작업 중 중단
→ "나중에 계속하기" 선택
```

**둘째 날:**
```bash
npm run workflow

# 자동으로 단계 4부터 재개
? 기존 프로젝트 "my-awesome-app"를 계속하시겠습니까?
→ Yes

# 단계 4 계속...
```

### 시나리오 3: 결과 불만족 - 재작업

```bash
npm run workflow

# 단계 5 작업 완료
? 작업 결과가 만족스럽습니까?
→ No

? 어떤 부분을 수정/보완하고 싶으신가요?
→ TypeScript 설정이 잘못됨

? 다음 단계:
→ 수정/보완 후 다시 확인

# 프롬프트 다시 표시
→ Claude Code에서 수정 작업
→ 다시 확인

? 작업 결과가 만족스럽습니까?
→ Yes

# 다음 단계로 진행
```

### 시나리오 4: 특정 단계부터 시작

```bash
# 단계 7부터 시작
npm run workflow -- --step 7

# 단계 7 백엔드 통합부터 진행
```

## 🔥 고급 활용

### 1. 단계별 맞춤 정보

각 단계마다 다른 질문이 표시됩니다:

- **단계 1**: 문제, 타겟 사용자, 경쟁사
- **단계 2**: 핵심 기능, 기술 스택
- **단계 3**: 데이터 테이블, API 엔드포인트
- **단계 4**: 디자인 참조, 스타일
- **단계 5**: TypeScript, 프레임워크
- **단계 6-10**: 각 단계에 맞는 정보

### 2. 프롬프트 자동 저장

모든 프롬프트는 `claudedocs/` 폴더에 자동 저장됩니다:

```
claudedocs/
├── prompt-step-1.md
├── prompt-step-2.md
├── prompt-step-3.md
└── ...
```

나중에 참조하거나 다시 실행할 수 있습니다!

### 3. 피드백 히스토리

각 단계의 피드백이 모두 저장되어:
- 어떤 부분을 수정했는지 추적
- 프로젝트 학습 자료로 활용
- 팀원들과 공유 가능

### 4. 다른 명령어와 연계

워크플로우 중간에 다른 명령어도 사용할 수 있습니다:

```bash
# 다른 터미널에서
npm run status     # 진행 상태 확인
npm run checklist  # 체크리스트 관리
npm run analyze -- /path/to/project  # 프로젝트 분석
```

## 💡 팁과 모범 사례

### ✅ 좋은 사용 패턴

1. **충분한 정보 제공**: 단계별 질문에 구체적으로 답변하세요
2. **프롬프트 파일 저장**: 나중에 참조하거나 재실행할 수 있습니다
3. **정기적인 체크포인트**: 각 단계 완료 후 `npm run status`로 확인
4. **피드백 상세 작성**: 수정 사항을 구체적으로 기록하세요
5. **한 번에 한 단계**: 급하게 건너뛰지 말고 단계별로 완성하세요

### ⚠️ 피해야 할 패턴

1. **불완전한 정보**: 질문에 대충 답변하면 프롬프트 품질이 낮아집니다
2. **검증 없이 진행**: 결과를 제대로 확인하지 않고 다음 단계로 가지 마세요
3. **프롬프트 무시**: 생성된 프롬프트를 실행하지 않고 건너뛰지 마세요
4. **피드백 생략**: "수정 필요함"처럼 모호하게 작성하지 마세요

## 🔄 재시도(Retry) 기능 이해하기

### 재시도가 필요한 경우

"재시도(retry)"를 선택하면 **같은 단계를 처음부터 다시 진행**합니다. 이 기능은 다음과 같은 상황에 유용합니다:

- ✅ Claude Code 작업이 예상과 달라서 **완전히 다시** 시작하고 싶을 때
- ✅ 입력한 정보를 **수정해서 다시** 프롬프트를 생성하고 싶을 때
- ✅ 프롬프트를 **다시 확인**하고 싶을 때

### ⚠️ 재시도 루프 주의사항

**중요**: "재시도"를 계속 선택하면 같은 단계가 반복됩니다!

```
단계 3 시작
   ↓
프롬프트 생성
   ↓
작업 완료? → No → "프롬프트 다시 보기" 선택
   ↓ (retry 선택)
단계 3 다시 시작 ← 여기서 루프!
   ↓
프롬프트 다시 생성
   ↓
작업 완료? → No → "프롬프트 다시 보기" 선택
   ↓ (다시 retry 선택)
단계 3 또 다시 시작 ← 계속 반복됨!
```

### 🛡️ 재시도 루프 방지 기능

워크플로우는 **재시도 카운터**로 무한 루프를 방지합니다:

```
⚠️  재시도 횟수: 3/10

# 10번 재시도하면:
⚠️  최대 재시도 횟수에 도달했습니다.

? 어떻게 하시겠습니까?
  ❯ 다음 단계로 강제 진행
    이전 단계로 돌아가기
    워크플로우 종료
```

### 🎯 올바른 선택 방법

#### ❌ 잘못된 사용

```
? 작업 결과가 만족스럽습니까? No
? 다음 단계:
  ❯ 수정/보완 후 다시 확인 (retry) ← 계속 선택하면 루프!
```

#### ✅ 올바른 사용

```
# 상황 1: 완전히 다시 시작하고 싶을 때
? 작업 결과가 만족스럽습니까? No
? 다음 단계:
  ❯ 수정/보완 후 다시 확인 (retry) ← 한두 번만 사용

# 상황 2: 대충 괜찮으면 진행
? 다음 단계:
  ❯ 이 단계는 이정도로 충분함 (다음 단계로) ← 완벽하지 않아도 OK

# 상황 3: 나중에 다시 하기
? 다음 단계:
  ❯ 워크플로우 종료 ← 저장하고 나중에 재개
```

### 💡 루프에서 빠져나오는 방법

만약 재시도를 반복해서 선택하고 있다면:

1. **"워크플로우 종료"** 선택
   - 현재 상태가 저장됩니다
   - 나중에 다시 시작할 수 있습니다

2. **"이 단계는 이정도로 충분함"** 선택
   - 완벽하지 않아도 다음 단계로 진행
   - 나중에 돌아와서 수정 가능

3. **최대 10번 재시도 후**
   - 자동으로 강제 진행 옵션 제공
   - 다음 단계로 넘어가거나 종료 선택

### 📋 재시도 vs 다른 옵션

| 옵션 | 결과 | 사용 시점 |
|------|------|----------|
| **🔄 수정/보완 후 다시 확인** | 같은 단계 반복 | 완전히 다시 하고 싶을 때 |
| **⏭️ 이정도로 충분함** | 다음 단계로 이동 | 대충 괜찮을 때 |
| **💾 워크플로우 종료** | 저장하고 종료 | 나중에 계속하고 싶을 때 |
| **⬅️ 이전 단계로** | 이전 단계 재검토 | 이전 작업을 고쳐야 할 때 |

### 🎓 실전 예시

#### 예시 1: 재시도가 필요한 경우
```
# Claude Code 실행 결과가 이상함
? 작업 결과가 만족스럽습니까? No
? 어떤 부분을 수정/보완하고 싶으신가요?
→ 입력한 정보가 잘못됨. 타겟 사용자를 변경하고 싶음

? 다음 단계:
  ❯ 수정/보완 후 다시 확인 (retry) ← 정보를 바꿔서 다시 시작

# 단계가 다시 시작되고 정보 입력부터 다시 시작
```

#### 예시 2: 다음 단계로 진행이 맞는 경우
```
# 결과가 80% 만족스러움
? 작업 결과가 만족스럽습니까? No
? 어떤 부분을 수정/보완하고 싶으신가요?
→ 일부 코멘트가 부족하지만 나중에 추가 가능

? 다음 단계:
  ❯ 이 단계는 이정도로 충분함 (다음 단계로) ← 진행!

# 다음 단계로 이동
```

#### 예시 3: 나중에 하기
```
# 지금은 시간이 없음
? 작업 결과가 만족스럽습니까? No
? 어떤 부분을 수정/보완하고 싶으신가요?
→ 시간이 부족해서 나중에 마저 하고 싶음

? 다음 단계:
  ❯ 워크플로우 종료 ← 저장하고 종료

💾 진행 상태가 저장되었습니다.
💡 나중에 "npm run workflow"로 다시 시작할 수 있습니다.
```

## 🎓 완전한 예시

```bash
$ npm run workflow

🚀 Automation Master - 대화형 워크플로우

? 프로젝트 이름을 입력하세요: task-master
✅ 프로젝트 "task-master" 생성 완료!

════════════════════════════════════════════════════
  단계 1: 아이디어 발굴 및 정의
════════════════════════════════════════════════════

╔════════════════════════════════════════════════╗
║  📋 아이디어 발굴 및 정의
║
║  예상 소요 시간: 1-2주
║  MCP 서버: @task-master, @web-search, @memory
╚════════════════════════════════════════════════╝

📝 주요 작업:
  1. 문제 정의 및 목표 설정
  2. 타겟 사용자 페르소나 작성
  3. 경쟁사 제품 분석
  4. 핵심 차별화 포인트 도출
  5. 기술적 실현 가능성 검토

💡 이 단계에 필요한 정보를 입력해주세요.

? 해결하려는 문제가 무엇인가요?
→ 프로젝트 작업 관리가 복잡하고 팀원들이 진행 상황을 파악하기 어려움

? 타겟 사용자는 누구인가요?
→ 10-50명 규모의 스타트업 개발팀

? 경쟁 제품/서비스가 있다면 입력하세요:
→ Linear, Jira, Asana, Trello

? 추가로 고려할 사항이 있다면 입력하세요 (선택):
→ 간단하고 직관적인 UI, 빠른 속도, 개발자 친화적

⏳ 프롬프트 생성 중...
✔ 프롬프트 생성 완료!

[프롬프트 내용 표시...]

? 프롬프트를 파일로 저장하시겠습니까? (Y/n) Yes
✅ 프롬프트가 저장되었습니다: claudedocs/prompt-step-1.md

⏸️  Claude Code에서 작업을 완료한 후 계속하세요.

? Claude Code 작업이 완료되었습니까? (Y/n) Yes

? 작업 결과가 만족스럽습니까? (Y/n) Yes

✅ 단계 1 완료!

? 다음 단계 2로 진행하시겠습니까? (Y/n) Yes

════════════════════════════════════════════════════
  단계 2: PDR 작성
════════════════════════════════════════════════════

[계속...]
```

## 🚀 다음 단계

워크플로우를 마스터했다면:

1. **프로젝트 분석**: `npm run analyze -- /path/to/project`
2. **AI 리더십**: `npm run lead -- /path/to/project --interactive`
3. **환경변수 관리**: `npm run env`
4. **진행 상태 확인**: `npm run status`

---

**Happy Building! 🎉**
